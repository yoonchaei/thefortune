# Blueprint: The Fortune - 사주 커뮤니티 PWA (v2 - 안정화 버전)

## 1. 프로젝트 개요

**The Fortune**은 사용자들이 사주 명리학에 대한 정보와 생각을 자유롭게 나누는 모던 웹 커뮤니티 애플리케이션입니다. Firebase를 백엔드로 활용하여 실시간 데이터 통신을 지원하며, 복잡한 프레임워크 없이 웹 표준 기술(HTML, CSS, JavaScript)을 중심으로 구축됩니다.

## 2. 디자인 철학 및 비주얼 가이드

- **테마**: Minty & Rose (민트 & 로즈)
- **핵심 가치**: 차분함, 신뢰, 현대적 감각, 그리고 부드러운 사용자 경험.
- **폰트**:
  - 로고: `Cinzel` (세리프) - 고급스럽고 신비로운 느낌
  - 제목: `Song Myung` (세리프) - 명확하고 가독성 높은 한국어 제목
  - 본문: `Gowun Dodum` (산세리프) - 부드럽고 편안한 읽기 경험
- **색상 팔레트**:
  - 배경 (`--color-bg`): `#f0f5f3`
  - 표면 (`--color-surface`): `#ffffff`
  - 주요 (`--color-primary`): `#6B8E85`
  - 강조 (`--color-accent`): `#b0899a`
  - 텍스트 (`--color-text`): `#4a4a4a`

## 3. 최종 아키텍처 및 파일 구조

반복적인 스타일 충돌 문제를 해결하고 안정적인 구조를 확립하기 위해 CSS 아키텍처를 다음과 같이 확정합니다.

### 3.1. 핵심 원칙: **스타일 분리 (Separation of Concerns)**

- **전역 스타일과 페이지 전용 스타일을 명확히 분리**하여 한 페이지의 수정이 다른 페이지에 영향을 주지 않도록 합니다.

### 3.2. CSS 파일 구조

1.  **`style.css` (전역 및 댓글 게시판 스타일)**
    - **역할**: 사이트 전반의 기본 스타일(헤더, 푸터, 폰트, 색상 변수 등)을 정의합니다.
    - **적용 페이지**: 모든 페이지(`index.html`, `information.html`, `free.html`, `qna.html`)
    - **추가 역할**: **댓글 기반 게시판**(`free.html`, `qna.html`)의 모든 스타일(댓글 목록, 댓글 입력창 등)을 전담합니다.

2.  **`information-style.css` (정보 게시판 전용 스타일)**
    - **역할**: **게시글 목록 기반 게시판**(`information.html`)의 고유한 스타일을 모두 정의합니다. (예: 게시글 목록, 카테고리 필터 버튼, 페이지네이션, 글쓰기 버튼 등)
    - **적용 페이지**: `information.html`에만 적용됩니다.

### 3.3. 페이지별 파일 연결 구조

- **`index.html`**:
  - `style.css`

- **`free.html` 및 `qna.html` (댓글 게시판)**:
  - **CSS**: `style.css`
  - **JS**: `board-comment.js`, `firebase-config.js`

- **`information.html` (정보 게시판)**:
  - **CSS**: `style.css`, `information-style.css` (순서대로 연결)
  - **JS**: `board-list.js`, `firebase-config.js`

---

## 4. 현재 진행 작업: 다크/라이트 모드 전환 기능 구현

**목표**: 모든 페이지에 다크/라이트 모드를 전환할 수 있는 버튼을 추가하고, 사용자의 선택을 브라우저에 저장하여 일관된 경험을 제공합니다.

**세부 실행 계획:**

1.  **CSS 수정 (`style.css`)**: 
    - `body[data-theme='dark']` 선택자를 사용하여 다크 모드용 색상 변수(배경, 텍스트, 표면 등)를 정의합니다.
    - 헤더에 추가될 모드 전환 버튼의 스타일을 정의합니다.

2.  **JavaScript 로직 생성 (`theme-toggle.js`)**: 
    - 새로운 `theme-toggle.js` 파일을 생성합니다.
    - 페이지 로드 시, 사용자의 `localStorage` 설정이나 시스템 선호도(`prefers-color-scheme`)를 확인하여 초기 테마를 적용합니다.
    - 헤더 영역에 테마 전환 버튼(아이콘)을 동적으로 생성하고 삽입합니다.
    - 버튼 클릭 시 `<body>`의 `data-theme` 속성을 변경하고, 선택된 테마를 `localStorage`에 저장하는 이벤트 리스너를 추가합니다.

3.  **HTML 파일 업데이트 (전체)**:
    - `index.html`, `information.html`, `free.html`, `qna.html` 파일에 `theme-toggle.js` 스크립트를 추가합니다. 스크립트는 `defer` 속성을 사용하여 HTML 파싱 후 실행되도록 합니다.

---

## 5. 문제 해결 및 안정화 기록

- **핵심 문제**: `style.css` 단일 파일에 여러 다른 레이아웃(댓글형, 게시글형)의 스타일이 혼재되어, 한쪽을 수정하면 다른 쪽의 디자인이 깨지는 '스타일 충돌'이 반복적으로 발생했습니다.

- **최종 해결**:
  1. **CSS 역할 분리**: `style.css`는 전역 및 댓글형 게시판 스타일을 담당하도록 역할을 명확히 했습니다.
  2. **전용 스타일시트 생성**: `information.html`의 게시글형 레이아웃을 위한 모든 스타일을 `information-style.css` 파일로 완전히 분리했습니다.
  3. **HTML 링크 정리**: 각 HTML 파일이 자신의 역할에 맞는 CSS 파일만 정확히 연결하도록 수정하여 구조적 안정성을 확보했습니다.
  4. **캐시 문제 방지**: 모든 HTML 파일에서 CSS 및 JS 링크의 버전 파라미터(`?v=...`)를 제거하여, 항상 최신 파일이 로드되도록 보장했습니다.

- **결과**: 현재 아키텍처는 각 페이지의 스타일이 독립적으로 관리되므로, 향후 유지보수가 용이하며 예측 가능성이 높습니다.
